<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>๐ค ุชุญููู ุตูุช ุงูุณูุงุนุฉ ุฅูู ูุต (ุนุฑุจู / ุฅูุฌููุฒู)</title>
  <style>
    body { font-family: Arial; padding: 20px; direction: rtl; background: #f9f9f9; }
    button { padding: 10px 20px; font-size: 16px; margin: 5px; cursor: pointer; }
    #text { margin-top: 20px; font-size: 18px; color: green; white-space: pre-wrap; }
  </style>
</head>
<body>

  <h1>๐ค ุชุญููู ุตูุช ุงูุณูุงุนุฉ ุฅูู ูุต (ุนุฑุจู / ุฅูุฌููุฒู)</h1>
  <button onclick="startRecognition('ar-SA')">๐๏ธ ุชุณุฌูู ุจุงูุนุฑุจู</button>
  <button onclick="startRecognition('en-US')">๐๏ธ Record in English</button>
  <button onclick="stopRecognition()">โน๏ธ ูู ุงูุชุณุฌูู</button>

  <p id="text">๐ ุงููุต ุณูุธูุฑ ููุง...</p>

  <script>
    let recognition;

    function startRecognition(lang) {
      stopRecognition(); // ุฅููุงู ุฃู ุชุณุฌูู ุดุบุงู

      if (!window.SpeechRecognition && !window.webkitSpeechRecognition) {
        alert("ูุชุตูุญู ูุง ูุฏุนู ุงูุชุนุฑู ุนูู ุงูุตูุช.");
        return;
      }

      recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
      recognition.lang = lang;
      recognition.continuous = true;
      recognition.interimResults = true;

      let finalTranscript = '';

      recognition.onstart = () => {
        document.getElementById('text').textContent = `๐ง ุฌุงุฑู ุงูุงุณุชูุงุน (${lang === 'ar-SA' ? 'ุนุฑุจู' : 'English'})...`;
      };

      recognition.onresult = (event) => {
        let interim = '';
        for (let i = event.resultIndex; i < event.results.length; i++) {
          const transcript = event.results[i][0].transcript;
          if (event.results[i].isFinal) {
            finalTranscript += transcript + '\n';
          } else {
            interim += transcript;
          }
        }
        document.getElementById('text').textContent = finalTranscript + interim;
      };

      recognition.onerror = (event) => {
        document.getElementById('text').textContent = 'โ ุฎุทุฃ: ' + event.error;
      };

      recognition.onend = () => {
        document.getElementById('text').textContent += '\n๐ ุชู ุฅููุงู ุงูุชุณุฌูู.';
      };

      recognition.start();
    }

    function stopRecognition() {
      if (recognition) {
        recognition.stop();
      }
    }
  </script>

</body>
</html>
